# 古诗文功能说明

## 已完成功能

### 1. 数据结构设计

创建了完整的古诗文数据结构 (`src/utils/poetry.ts`)，包含：

- **体裁形式分类**：
  - 古体诗：四言诗、五言古诗、七言古诗、杂言诗
  - 近体诗：五言绝句、七言绝句、五言律诗、七言律诗、排律
  - 词、曲

- **内容题材分类**：
  - 山水田园、边塞、咏物、咏史、送别、思乡、讽喻、悼亡、爱情、哲理

- **历史时期分类**：
  - 先秦、汉魏六朝、唐、宋、元、明清

### 2. 筛选功能

创建了 `PoetryFilter.vue` 组件，支持：

- ✅ 体裁形式筛选（可多选）
- ✅ 内容题材筛选（可多选）
- ✅ 历史时期筛选（可多选）
- ✅ 作者筛选（文本输入）
- ✅ 关键词搜索（标题、内容、作者）
- ✅ 筛选结果统计
- ✅ 清除筛选功能

### 3. 数据集成

- ✅ 在 `referenceRead.vue` 中集成了古诗文数据
- ✅ 支持从内存数据直接加载古诗文（无需文件）
- ✅ 兼容原有的文件加载方式
- ✅ 筛选结果实时更新文章列表

### 4. 示例数据

已添加 10 首经典古诗文作为示例：

1. 静夜思 - 李白（五言绝句，思乡）
2. 望岳 - 杜甫（五言古诗，山水田园）
3. 春望 - 杜甫（五言律诗，咏史）
4. 江雪 - 柳宗元（五言绝句，山水田园）
5. 早发白帝城 - 李白（七言绝句，山水田园）
6. 登高 - 杜甫（七言律诗，思乡）
7. 水调歌头·明月几时有 - 苏轼（词，思乡、哲理）
8. 念奴娇·赤壁怀古 - 苏轼（词，咏史）
9. 天净沙·秋思 - 马致远（曲，思乡）
10. 饮酒·其五 - 陶渊明（五言古诗，山水田园、哲理）

## 使用方法

### 在 referenceRead 页面

1. **筛选古诗文**：
   - 打开筛选面板
   - 选择体裁形式、内容题材、历史时期
   - 输入作者或关键词
   - 查看筛选结果

2. **选择文章**：
   - 从下拉列表中选择古诗文
   - 文章会直接显示，无需加载文件

3. **查看分类信息**：
   - 文章选择器中会显示体裁分类标签

## 扩展数据

### 方式一：在代码中添加

编辑 `src/utils/poetry.ts`，在 `POETRY_DATA` 数组中添加新的古诗文：

```typescript
{
  id: 'unique-id',
  title: '标题',
  author: '作者',
  dynasty: '朝代',
  content: '诗文内容',
  formType: ['jinti-wujue'],  // 体裁
  themeType: ['shanshui'],    // 题材
  periodType: 'tang',         // 时期
}
```

### 方式二：从 API 加载

可以修改 `referenceRead.vue`，从 API 加载古诗文数据：

```typescript
// 示例：从 API 加载
const loadPoetryFromAPI = async () => {
  const response = await fetch('/api/poetry')
  const data = await response.json()
  // 处理数据并添加到 POETRY_DATA
}
```

### 方式三：使用开源数据库

推荐使用 [chinese-poetry](https://github.com/chinese-poetry/chinese-poetry) 数据库：

1. 下载数据文件
2. 转换为项目格式
3. 导入到 `POETRY_DATA`

## 分类说明

### 体裁形式

- **古体诗（古风）**：格律自由
  - 四言诗：《诗经》为代表
  - 五言古诗：陶渊明《饮酒》、杜甫《望岳》
  - 七言古诗：白居易《长恨歌》、李白《将进酒》
  - 杂言诗：李白《蜀道难》

- **近体诗（格律诗）**：格律严格
  - 五言绝句：王维《鹿柴》、柳宗元《江雪》
  - 七言绝句：李白《早发白帝城》、杜牧《泊秦淮》
  - 五言律诗：王维《山居秋暝》、杜甫《春望》
  - 七言律诗：杜甫《登高》、李商隐《锦瑟》
  - 排律：十句以上

- **词**：依词牌填词
  - 婉约派：李清照《声声慢》、柳永《雨霖铃》
  - 豪放派：苏轼《念奴娇·赤壁怀古》、辛弃疾《破阵子》

- **曲**：元曲
  - 散曲：马致远《天净沙·秋思》
  - 剧曲：关汉卿《窦娥冤》

### 内容题材

- **山水田园诗**：描绘自然风光、田园生活
- **边塞诗**：写边疆战争、军旅生活
- **咏物诗**：托物言志，借物抒情
- **咏史诗**：凭吊古迹，评论历史
- **送别诗**：抒发离别之情
- **思乡诗**：表达羁旅愁思
- **讽喻诗**：讽刺时弊，关注民生
- **悼亡诗**：悼念亡人
- **爱情诗**：描写男女之情
- **哲理诗**：蕴含人生哲理

## 技术实现

- **类型安全**：使用 TypeScript 定义完整的类型系统
- **响应式筛选**：使用 Vue 3 Composition API 实现实时筛选
- **组件化设计**：筛选功能独立为组件，易于维护
- **数据兼容**：兼容原有的文章加载方式

## 后续优化建议

1. **数据扩展**：
   - 集成更多古诗文数据
   - 支持从 API 动态加载
   - 支持本地文件导入

2. **功能增强**：
   - 添加收藏功能
   - 添加学习进度跟踪
   - 添加注释和译文显示
   - 添加朗读功能

3. **用户体验**：
   - 优化筛选界面
   - 添加筛选条件保存
   - 添加快速筛选标签

4. **性能优化**：
   - 大数据量时的虚拟滚动
   - 筛选结果缓存
   - 懒加载数据

